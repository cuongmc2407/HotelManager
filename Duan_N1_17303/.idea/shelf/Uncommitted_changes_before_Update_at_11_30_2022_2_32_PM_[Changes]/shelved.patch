Index: app/src/main/java/team1/fpoly/duan_n1_17303/Adapter/ProductAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package team1.fpoly.duan_n1_17303.Adapter;\r\n\r\nimport android.app.AlertDialog;\r\nimport android.app.Dialog;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.BaseAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport team1.fpoly.duan_n1_17303.Dao.ProductDao;\r\nimport team1.fpoly.duan_n1_17303.Object.Product;\r\nimport team1.fpoly.duan_n1_17303.R;\r\n\r\npublic class ProductAdapter extends ArrayAdapter<Product> {\r\n\r\n    Context context;\r\n    ArrayList<Product> listProduct;\r\n    ProductDao productDao;\r\n\r\n    public ProductAdapter(Context context, ArrayList<Product> listProduct, ProductDao productDao) {\r\n        super(context, 0, listProduct);\r\n        this.context = context;\r\n        this.listProduct = listProduct;\r\n        this.productDao = productDao;\r\n    }\r\n\r\n    TextView tv_Product_Name, tv_Price, tv_Quantity;\r\n    ImageView iv_Delete;\r\n\r\n    @Override\r\n    public int getCount() {\r\n        if (!listProduct.isEmpty()) return listProduct.size();\r\n        return 0;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, View convertView, ViewGroup parent) {\r\n        if(convertView == null){\r\n            convertView = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_product, parent, false);\r\n        }\r\n\r\n        final Product product = listProduct.get(position);\r\n\r\n        if(product != null){\r\n            tv_Product_Name = convertView.findViewById(R.id.tv_Product_Name);\r\n            tv_Price = convertView.findViewById(R.id.tv_Price);\r\n            tv_Quantity = convertView.findViewById(R.id.tv_Quantity);\r\n            iv_Delete = convertView.findViewById(R.id.iv_DeleteProduct);\r\n\r\n            tv_Product_Name.setText(\"Tên sản phẩm: \" + product.getProductName());\r\n            tv_Price.setText(\"Giá: \" + product.getPrice());\r\n            tv_Quantity.setText(\"Số lượng: \" + product.getQuantity());\r\n            iv_Delete.setOnClickListener(view -> {\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(context);\r\n                builder.setTitle(\"Bạn có muốn xóa.\");\r\n                builder.setMessage(\"Sản phẩm \" + product.getProductName());\r\n                builder.setPositiveButton(\"Không\", new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        dialog.dismiss();\r\n                    }\r\n                });\r\n                builder.setNegativeButton(\"Có\", new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        listProduct.remove(product);\r\n                        notifyDataSetChanged();\r\n                        int check = productDao.deleteProduct(product.getProductId());\r\n                        switch (check){\r\n                            case 1:\r\n                                Toast.makeText(context.getApplicationContext(), \"Xóa thành công\",Toast.LENGTH_LONG).show();\r\n                                break;\r\n                            case -1:\r\n                                Toast.makeText(context.getApplicationContext(), \"Sản phẩm đã tồn tại trong phòng hoặc trong hóa đơn. Không thể xóa\",Toast.LENGTH_LONG).show();\r\n                                break;\r\n                            case 0:\r\n                                Toast.makeText(context.getApplicationContext(), \"Xóa thất bại\",Toast.LENGTH_LONG).show();\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n                Dialog dialog = builder.create();\r\n                dialog.show();\r\n            });\r\n        }\r\n\r\n        return convertView;\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/team1/fpoly/duan_n1_17303/Adapter/ProductAdapter.java b/app/src/main/java/team1/fpoly/duan_n1_17303/Adapter/ProductAdapter.java
--- a/app/src/main/java/team1/fpoly/duan_n1_17303/Adapter/ProductAdapter.java	(revision 5bd9e2718f81a25461ce532e957471b15b52112f)
+++ b/app/src/main/java/team1/fpoly/duan_n1_17303/Adapter/ProductAdapter.java	(date 1669776012825)
@@ -77,7 +77,7 @@
                     public void onClick(DialogInterface dialog, int which) {
                         listProduct.remove(product);
                         notifyDataSetChanged();
-                        int check = productDao.deleteProduct(product.getProductId());
+                        int check  = productDao.deleteProduct(product.getProductId());
                         switch (check){
                             case 1:
                                 Toast.makeText(context.getApplicationContext(), "Xóa thành công",Toast.LENGTH_LONG).show();
Index: app/src/main/java/team1/fpoly/duan_n1_17303/Fragment/ProductFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package team1.fpoly.duan_n1_17303.Fragment;\r\n\r\nimport android.app.Dialog;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBar;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\n\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport team1.fpoly.duan_n1_17303.Adapter.ProductAdapter;\r\nimport team1.fpoly.duan_n1_17303.Dao.ProductDao;\r\nimport team1.fpoly.duan_n1_17303.MainActivity;\r\nimport team1.fpoly.duan_n1_17303.Object.Product;\r\nimport team1.fpoly.duan_n1_17303.R;\r\nimport team1.fpoly.duan_n1_17303.Tools.AddProductFragment;\r\n\r\n\r\npublic class ProductFragment extends Fragment {\r\n\r\n    ListView lv_Product;\r\n    FloatingActionButton fl_Add_Product;\r\n    ProductDao productDao;\r\n    ArrayList<Product> listProduct = new ArrayList<>();\r\n    AddProductFragment addProductFragment;\r\n    Product product;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        return inflater.inflate(R.layout.fragment_product, container, false);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        lv_Product = view.findViewById(R.id.lv_Product);\r\n        fl_Add_Product = view.findViewById(R.id.fl_Add_Product);\r\n\r\n        addProductFragment = new AddProductFragment();\r\n\r\n        loadData();\r\n\r\n        productDao = new ProductDao(getContext());\r\n\r\n        FragmentManager fragmentManager = getActivity().getSupportFragmentManager();\r\n\r\n        lv_Product.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> adapterView, View view, int position, long l) {\r\n                //update\r\n                product = listProduct.get(position);\r\n                updateData();\r\n            }\r\n        });\r\n\r\n        fl_Add_Product.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //Ẩn toolbar ở menu\r\n                MainActivity mainActivity = (MainActivity) getActivity();\r\n                ActionBar actionBar =  mainActivity.getSupportActionBar();\r\n                actionBar.hide();\r\n                fragmentManager.beginTransaction().replace(R.id.frameLayout, addProductFragment).commit();\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    private void loadData() {\r\n        //ArrayList<Product> listProduct = productDao.getListProduct();\r\n        ArrayList<Product> listProduct = new ArrayList<>();\r\n        listProduct.add(new Product(\"test\" ,1000, 1000));\r\n        ProductAdapter productAdapter = new ProductAdapter(getContext(), listProduct,productDao);\r\n        lv_Product.setAdapter(productAdapter);\r\n    }\r\n\r\n    private void updateData() {\r\n        Dialog dialog = new Dialog(getActivity());\r\n        dialog.setContentView(R.layout.fragment_add_product);\r\n        TextView tv_Title_Product = dialog.findViewById(R.id.tv_Title_Product);\r\n        EditText ed_Product_Name = dialog.findViewById(R.id.ed_Product_Name);\r\n        EditText ed_Product_Price = dialog.findViewById(R.id.ed_Product_Price);\r\n        EditText ed_Product_Quantity = dialog.findViewById(R.id.ed_Product_Quantity);\r\n        ImageView img_Back_Product = dialog.findViewById(R.id.img_Back_Product);\r\n        ImageView img_Save_Product = dialog.findViewById(R.id.img_Save_Product);\r\n\r\n        tv_Title_Product.setText(\"Sửa sản phẩm\");\r\n        ed_Product_Name.setText(product.getProductName());\r\n        ed_Product_Price.setText(product.getPrice());\r\n        ed_Product_Quantity.setText(product.getQuantity());\r\n\r\n        img_Back_Product.setOnClickListener(view -> {\r\n            dialog.dismiss();\r\n        });\r\n\r\n        img_Save_Product.setOnClickListener(view -> {\r\n            Product product = new Product();\r\n\r\n            product.setProductName(ed_Product_Name.getText().toString());\r\n            product.setPrice(Integer.parseInt(ed_Product_Price.getText().toString()));\r\n            product.setQuantity(Integer.parseInt(ed_Product_Quantity.getText().toString()));\r\n\r\n\r\n        });\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/team1/fpoly/duan_n1_17303/Fragment/ProductFragment.java b/app/src/main/java/team1/fpoly/duan_n1_17303/Fragment/ProductFragment.java
--- a/app/src/main/java/team1/fpoly/duan_n1_17303/Fragment/ProductFragment.java	(revision 5bd9e2718f81a25461ce532e957471b15b52112f)
+++ b/app/src/main/java/team1/fpoly/duan_n1_17303/Fragment/ProductFragment.java	(date 1669793086678)
@@ -87,9 +87,8 @@
     }
 
     private void loadData() {
-        //ArrayList<Product> listProduct = productDao.getListProduct();
-        ArrayList<Product> listProduct = new ArrayList<>();
-        listProduct.add(new Product("test" ,1000, 1000));
+        productDao = new ProductDao(getContext());
+        listProduct = productDao.getListProduct();
         ProductAdapter productAdapter = new ProductAdapter(getContext(), listProduct,productDao);
         lv_Product.setAdapter(productAdapter);
     }
